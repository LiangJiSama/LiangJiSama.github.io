<!DOCTYPE html>

<html lang="zh-CN">

<head>
  
  <title>文章归档 - LiangJiSama Offical</title>
  <meta charset="UTF-8">
  <meta name="description" content="">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5">
  
  

  <link rel="shortcut icon" href="favicon.ico" type="image/vnd.microsoft.icon" />
  <meta property="og:type" content="website">
<meta property="og:title" content="LiangJiSama Offical">
<meta property="og:url" content="http://liangjisama.top/archives/index.html">
<meta property="og:site_name" content="LiangJiSama Offical">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="Kagamine Len">
<meta name="twitter:card" content="summary">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/combine/npm/highlight.js@9.15.8/styles/atom-one-dark.css,gh/theme-nexmoe/hexo-theme-nexmoe@latest/source/lib/mdui_043tiny/css/mdui.css,gh/theme-nexmoe/hexo-theme-nexmoe@latest/source/lib/iconfont/iconfont.css,gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css?v=233" crossorigin>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/css/justifiedGallery.min.css">
  
  <link rel="stylesheet" href="/css/style.css?v=1620218706410">
<meta name="generator" content="Hexo 5.4.0"></head>

<body class="mdui-drawer-body-left">
  
  <div id="nexmoe-background">
    <div class="nexmoe-bg" style="background-image: url(https://i.loli.net/2021/04/27/lVnTj5pPwD4GAyE.jpg)"></div>
    <div class="mdui-appbar mdui-shadow-0">
      <div class="mdui-toolbar">
        <a mdui-drawer="{target: '#drawer', swipe: true}" title="menu" class="mdui-btn mdui-btn-icon mdui-ripple"><i class="mdui-icon nexmoefont icon-menu"></i></a>
        <div class="mdui-toolbar-spacer"></div>
        <!--<a href="javascript:;" class="mdui-btn mdui-btn-icon"><i class="mdui-icon material-icons">search</i></a>-->
        <a href="/" title="Kagamine Len" class="mdui-btn mdui-btn-icon"><img src="https://i.loli.net/2021/04/27/ZAib7wdrOfgCsBl.jpg" alt="Kagamine Len"></a>
       </div>
    </div>
  </div>
  <div id="nexmoe-header">
      <div class="nexmoe-drawer mdui-drawer" id="drawer">
    <div class="nexmoe-avatar mdui-ripple">
        <a href="/" title="Kagamine Len">
            <img src="https://i.loli.net/2021/04/27/ZAib7wdrOfgCsBl.jpg" alt="Kagamine Len" alt="Kagamine Len">
        </a>
    </div>
    <div class="nexmoe-count">
        <div><span>文章</span>7</div>
        <div><span>标签</span>5</div>
        <div><span>分类</span>1</div>
    </div>
    <div class="nexmoe-list mdui-list" mdui-collapse="{accordion: true}">
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple" href="/" title="回到首页">
            <i class="mdui-list-item-icon nexmoefont icon-home"></i>
            <div class="mdui-list-item-content">
                回到首页
            </div>
        </a>
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple" href="/about" title="关于博客">
            <i class="mdui-list-item-icon nexmoefont icon-info-circle"></i>
            <div class="mdui-list-item-content">
                关于博客
            </div>
        </a>
        
    </div>
    <aside id="nexmoe-sidebar">
  
  <div class="nexmoe-widget-wrap">
    <div class="nexmoe-widget nexmoe-search">
        <form id="search_form" action_e="https://cn.bing.com/search?q=site:liangjisama.top" onsubmit="return search();">
            <label><input id="search_value" name="q" type="search" placeholder="搜索"></label>
        </form>
    </div>
</div>
  
  <div class="nexmoe-widget-wrap">
    <div class="nexmoe-widget nexmoe-social">
        <a class="mdui-ripple" href="https://github.com/LiangJiSama" target="_blank" mdui-tooltip="{content: 'GitHub'}" style="color: rgb(25, 23, 23);background-color: rgba(25, 23, 23, .15);">
            <i class="nexmoefont icon-github"></i>
        </a>
    </div>
</div>
  
  
  <div class="nexmoe-widget-wrap">
    <h3 class="nexmoe-widget-title">文章分类</h3>
    <div class="nexmoe-widget">

      <ul class="category-list">

        


        

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/笔记/">笔记</a>
          <span class="category-list-count">7</span>
        </li>

        
      </ul>

    </div>
  </div>


  
  
  <div class="nexmoe-widget-wrap">
    <div id="randomtagcloud" class="nexmoe-widget tagcloud nexmoe-rainbow">
      <a href="/tags/C/" style="font-size: 20px;">C++</a> <a href="/tags/unity/" style="font-size: 10px;">unity</a> <a href="/tags/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/" style="font-size: 10px;">操作系统</a> <a href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/" style="font-size: 10px;">数据库</a> <a href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86/" style="font-size: 10px;">计算机组成原理</a>
    </div>
    
  </div>

  
</aside>
    <div class="nexmoe-copyright">
        &copy; 2021 Kagamine Len
        Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
        & <a href="https://github.com/theme-nexmoe/hexo-theme-nexmoe" target="_blank">Nexmoe</a>
        
    </div>
</div><!-- .nexmoe-drawer -->
  </div>
  <div id="nexmoe-content">
    <div class="nexmoe-primary">
        <section class="nexmoe-posts">
    
    <div class="nexmoe-post">
        <a href="/2021/05/05/const%E5%85%B3%E9%94%AE%E5%AD%97/">
            
                <div class="nexmoe-post-cover mdui-ripple" style="padding-bottom: 50%;"> 
                    <img data-src="https://i.loli.net/2021/04/27/lVnTj5pPwD4GAyE.jpg" data-sizes="auto" alt="const关键字" class="lazyload">
                    <h1>const关键字</h1>
                </div>
            
        </a>

        <div class="nexmoe-post-meta nexmoe-rainbow-fill">
            <a><i class="nexmoefont icon-calendar-fill"></i>2021年05月05日</a>
            <a><i class="nexmoefont icon-areachart"></i>420 字</a>
            <a><i class="nexmoefont icon-time-circle-fill"></i>大概 2 分钟</a>
        </div>

        <article>
            
                <h2 id="引用"><a href="#引用" class="headerlink" title="引用"></a>引用</h2><p><img data-fancybox="gallery" data-sizes="auto" data-src="https://i.loli.net/2021/05/05/1bgfwK4k6L8NQih.png" alt="image-20210505101147641" class="lazyload"></p>
<p><img data-fancybox="gallery" data-sizes="auto" data-src="https://i.loli.net/2021/05/05/xDVqtyUKiZajMCs.png" alt="image-20210505101344643" class="lazyload"></p>
            
        </article>
    </div>
    
    <div class="nexmoe-post">
        <a href="/2021/04/29/unity%E5%90%84%E4%B8%AA%E4%BA%8B%E4%BB%B6%E7%9A%84%E8%B0%83%E7%94%A8%E9%A1%BA%E5%BA%8F/">
            
                <div class="nexmoe-post-cover mdui-ripple" style="padding-bottom: 50%;"> 
                    <img data-src="https://i.loli.net/2021/04/27/lVnTj5pPwD4GAyE.jpg" data-sizes="auto" alt="unity各个事件的调用顺序" class="lazyload">
                    <h1>unity各个事件的调用顺序</h1>
                </div>
            
        </a>

        <div class="nexmoe-post-meta nexmoe-rainbow-fill">
            <a><i class="nexmoefont icon-calendar-fill"></i>2021年04月29日</a>
            <a><i class="nexmoefont icon-areachart"></i>679 字</a>
            <a><i class="nexmoefont icon-time-circle-fill"></i>大概 2 分钟</a>
        </div>

        <article>
            
                <p><img data-fancybox="gallery" data-sizes="auto" data-src="https://docs.unity3d.com/cn/2019.4/uploads/Main/monobehaviour_flowchart.svg" alt="img" class="lazyload"></p>
<p>由图可见，unity为了保证fixedupdate的可靠性，就算在update中一次更新是十分缓慢的，但在fixedupdate中会循环执行直到当前fixedupdate能够执行到的时间与当前的时间相吻合。</p>
            
        </article>
    </div>
    
    <div class="nexmoe-post">
        <a href="/2021/04/29/%E7%88%B6%E7%B1%BB%E4%B8%8E%E5%AD%90%E7%B1%BB%E7%9A%84%E5%90%84%E7%A7%8D%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0%E7%9A%84%E8%B0%83%E7%94%A8%E5%85%B3%E7%B3%BB/">
            
                <div class="nexmoe-post-cover mdui-ripple" style="padding-bottom: 50%;"> 
                    <img data-src="https://i.loli.net/2021/04/27/lVnTj5pPwD4GAyE.jpg" data-sizes="auto" alt="父类与子类的各种构造函数的调用关系" class="lazyload">
                    <h1>父类与子类的各种构造函数的调用关系</h1>
                </div>
            
        </a>

        <div class="nexmoe-post-meta nexmoe-rainbow-fill">
            <a><i class="nexmoefont icon-calendar-fill"></i>2021年04月29日</a>
            <a><i class="nexmoefont icon-areachart"></i>255 字</a>
            <a><i class="nexmoefont icon-time-circle-fill"></i>大概 1 分钟</a>
        </div>

        <article>
            
                <p>Attention:</p>
<p>C++的初始化 base b=b(); or base b;调用的是构造函数 base d=b;仍然是一个对d的构造 因此应该调用拷贝构造函数而非拷贝赋值运算符</p>
<p>对于移动构造函数的情况间下列代码：</p>
            
        </article>
    </div>
    
    <div class="nexmoe-post">
        <a href="/2021/04/28/shareptr/">
            
                <div class="nexmoe-post-cover mdui-ripple" style="padding-bottom: 50%;"> 
                    <img data-src="https://i.loli.net/2021/04/27/lVnTj5pPwD4GAyE.jpg" data-sizes="auto" alt="shareptr" class="lazyload">
                    <h1>shareptr</h1>
                </div>
            
        </a>

        <div class="nexmoe-post-meta nexmoe-rainbow-fill">
            <a><i class="nexmoefont icon-calendar-fill"></i>2021年04月28日</a>
            <a><i class="nexmoefont icon-areachart"></i>881 字</a>
            <a><i class="nexmoefont icon-time-circle-fill"></i>大概 4 分钟</a>
        </div>

        <article>
            
                <p><img data-fancybox="gallery" data-sizes="auto" data-src="https://i.loli.net/2021/04/29/416mdcYxwj2KuvB.png" alt="image-20210429220617927" class="lazyload"></p>
<h2 id="为什么使用std-make-shared"><a href="#为什么使用std-make-shared" class="headerlink" title="为什么使用std::make_shared"></a>为什么使用std::make_shared</h2><p>std::shared_ptr是常用的智能指针，建立一个shared_ptr对象有两种方式：</p>
<pre><code class="c++">// (1)
std::shared_ptr&lt;Widget&gt; p1(new Widget);
// (2)
std::shared_ptr&lt;Widget&gt; p2(std::make_shared&lt;Widget&gt;());
</code></pre>
<p>通常方法（2）使用make_shared是更受推荐的做法。原因是</p>
<h2 id="减少重复代码"><a href="#减少重复代码" class="headerlink" title="减少重复代码"></a>减少重复代码</h2><p>对于</p>
<pre><code class="c++">// (2)
std::shared_ptr&lt;Widget&gt; p2(std::make_shared&lt;Widget&gt;());
</code></pre>
<p>它可以简化为</p>
<pre><code class="c++">// (2)
auto p2(std::make_shared&lt;Widget&gt;());
</code></pre>
<p>对比(1)少书写了一次Widget，在代码中减少重复总是一件好事，对吧:)</p>
<h2 id="效率更高"><a href="#效率更高" class="headerlink" title="效率更高"></a>效率更高</h2><p>对于</p>
<pre><code class="c++">// (1)
std::shared_ptr&lt;Widget&gt; p1(new Widget);
</code></pre>
<p>存在两次内存分配操作：<br> 1.new Widget<br> 2.为p1分配控制块（control block），控制块用于存放引用计数等信息<br> 而对于</p>
<pre><code class="c++">// (2)
auto p2(std::make_shared&lt;Widget&gt;());
</code></pre>
<p>只有一次内存内配操作，make_shared会一次性申请足够大的空间用于存放Widget对象和智能指针的控制块。<br> 在MSVC版本的STL中，make_shared的实现是</p>
<pre><code class="c++">template&lt;class _Ty,
    class... _Types&gt; inline
        shared_ptr&lt;_Ty&gt; make_shared(_Types&amp;&amp;... _Args)
    &#123;    // make a shared_ptr
    _Ref_count_obj&lt;_Ty&gt; *_Rx =
        new _Ref_count_obj&lt;_Ty&gt;(_STD forward&lt;_Types&gt;(_Args)...);

    shared_ptr&lt;_Ty&gt; _Ret;
    _Ret._Resetp0(_Rx-&gt;_Getptr(), _Rx);
    return (_Ret);
    &#125;
</code></pre>
<p>这里的_Ref_count_obj类包含成员变量：<br> 1.控制块<br> 2.一个内存块，用于存放智能指针管理的资源对象<br> 所以new _Ref_count_obj能一次性为控制块和资源对象申请内存。<br> 感兴趣的读者可以再看看_Ref_count_obj的构造函数：</p>
<pre><code class="c++">template&lt;class... _Types&gt;
    _Ref_count_obj(_Types&amp;&amp;... _Args)
    : _Ref_count_base()
    &#123;    // construct from argument list
    ::new ((void *)&amp;_Storage) _Ty(_STD forward&lt;_Types&gt;(_Args)...);
    &#125;
</code></pre>
<p>此处其实也有一个new操作，但是是placement new，不涉及内存分配。所以内存分配操作还是只有一次。<br> 引用计数在_Ref_count_obj的父类_Ref_count_base中。而_Storage就是存放资源对象的内存块。_</p>
<p><em>placement new 会在已经开辟的空间中存放这个sotrage对象，即把对象放在指定的空间位置</em><br> 那_Storage是怎么来的？它其实是一个联合体，编译器在编译时能获取到资源对象的大小，然后利用模板实例化出具有相等大小的联合体或结构体，这个联合体或结构体的对象就可以用于存放资源对象。</p>
<p><img data-fancybox="gallery" data-sizes="auto" data-src="https://i.loli.net/2021/04/29/5OjNR8Wa2lGHxXK.png" alt="image-20210429222958679" class="lazyload"></p>
<h1 id="unique-ptr"><a href="#unique-ptr" class="headerlink" title="unique_ptr"></a>unique_ptr</h1><p><img data-fancybox="gallery" data-sizes="auto" data-src="https://i.loli.net/2021/04/29/FzufkYTaVjehvCp.png" alt="image-20210429223330843" class="lazyload"></p>
<p>此处，unique_ptr采用了移动拷贝构造，虽然其普通拷贝构造是允许的，但是右值拷贝构造是允许的，因为编译器知道当前拷贝的这个对象将会被销毁，因此其仍然会调用该拷贝函数</p>
<h3 id="左值和右值"><a href="#左值和右值" class="headerlink" title="左值和右值"></a>左值和右值</h3><p><img data-fancybox="gallery" data-sizes="auto" data-src="https://i.loli.net/2021/04/29/BS9JzYjKe5OPbHl.png" alt="image-20210429223525254" class="lazyload"></p>
<p>如 函数返回的值为右值，nullptr为字面量为右值</p>
<p>函数返回引用时返回的为左值</p>
<h1 id="weak-ptr"><a href="#weak-ptr" class="headerlink" title="weak_ptr"></a>weak_ptr</h1><pre><code class="c++">      _Atomic_word  _M_use_count;     // #shared
      _Atomic_word  _M_weak_count;    // #weak + (#shared != 0)
</code></pre>
<p>由上述代码可见，实际上share_ptr和weak_ptr上都有指向一个计数类，包括对share_ptr的计数和对weak_ptr+(#shared!=0)的计数</p>
<p>即对于weak的计数来说，就算没有任何weak_ptr，其初始化值仍为1</p>
<p>那么weak_ptr什么时候判断share==0了呢？</p>
<pre><code class="c++">if (__gnu_cxx::__exchange_and_add_dispatch(&amp;_M_use_count, -1) == 1)
      &#123;
            _GLIBCXX_SYNCHRONIZATION_HAPPENS_AFTER(&amp;_M_use_count);
        _M_dispose();
        // There must be a memory barrier between dispose() and destroy()
        // to ensure that the effects of dispose() are observed in the
        // thread that runs destroy().
        // See http://gcc.gnu.org/ml/libstdc++/2005-11/msg00136.html
        if (_Mutex_base&lt;_Lp&gt;::_S_need_barriers)
          &#123;
        __atomic_thread_fence (__ATOMIC_ACQ_REL);
          &#125;

            // Be race-detector-friendly.  For more info see bits/c++config.
            _GLIBCXX_SYNCHRONIZATION_HAPPENS_BEFORE(&amp;_M_weak_count);
        if (__gnu_cxx::__exchange_and_add_dispatch(&amp;_M_weak_count,
                               -1) == 1)//此处 当share_ptr被释放时，会检测有无weak_ptr对象仍然引用了该计数，如果没有了，才会释放该计数器
              &#123;
                _GLIBCXX_SYNCHRONIZATION_HAPPENS_AFTER(&amp;_M_weak_count);
            _M_destroy();
              &#125;
      &#125;
      &#125;
</code></pre>

            
        </article>
    </div>
    
    <div class="nexmoe-post">
        <a href="/2021/04/27/file%20IO%20and%20virtual%20memory/">
            
                <div class="nexmoe-post-cover mdui-ripple" style="padding-bottom: 50%;"> 
                    <img data-src="https://i.loli.net/2021/04/27/lVnTj5pPwD4GAyE.jpg" data-sizes="auto" alt="文件读写及虚存访问" class="lazyload">
                    <h1>文件读写及虚存访问</h1>
                </div>
            
        </a>

        <div class="nexmoe-post-meta nexmoe-rainbow-fill">
            <a><i class="nexmoefont icon-calendar-fill"></i>2021年04月27日</a>
            <a><i class="nexmoefont icon-areachart"></i>1.7k 字</a>
            <a><i class="nexmoefont icon-time-circle-fill"></i>大概 7 分钟</a>
        </div>

        <article>
            
                <h1 id="虚拟缓存"><a href="#虚拟缓存" class="headerlink" title="虚拟缓存"></a>虚拟缓存</h1><h2 id="虚存的最大大小"><a href="#虚存的最大大小" class="headerlink" title="虚存的最大大小"></a>虚存的最大大小</h2><p>虚拟内存不受计算机中内存指针大小的限制，虚拟内存限制与寻址内存空间不同。可以解决的虚拟内存比使用分页的基于指针的地址空间中可用的虚拟内存更多</p>
<p>虚拟内存上限由操作系统设置：例如 32位Windows的限制为16TB，而在64位Windows上的限制为256TB。</p>
            
        </article>
    </div>
    
    <div class="nexmoe-post">
        <a href="/2021/04/27/NF/">
            
                <div class="nexmoe-post-cover mdui-ripple" style="padding-bottom: 50%;"> 
                    <img data-src="https://i.loli.net/2021/04/27/lVnTj5pPwD4GAyE.jpg" data-sizes="auto" alt="范式" class="lazyload">
                    <h1>范式</h1>
                </div>
            
        </a>

        <div class="nexmoe-post-meta nexmoe-rainbow-fill">
            <a><i class="nexmoefont icon-calendar-fill"></i>2021年04月27日</a>
            <a><i class="nexmoefont icon-areachart"></i>1.5k 字</a>
            <a><i class="nexmoefont icon-time-circle-fill"></i>大概 5 分钟</a>
        </div>

        <article>
            
                <h1 id="1-第一范式（1NF）"><a href="#1-第一范式（1NF）" class="headerlink" title="1. 第一范式（1NF）"></a>1. 第一范式（1NF）</h1><p>符合1NF的关系（你可以理解为数据表。“关系模式”和“关系”的区别，类似于面向对象程序设计中”类“与”对象“的区别。”关系“是”关系模式“的一个实例，你可以把”关系”理解为一张带数据的表，而“关系模式”是这张数据表的表结构。<strong>1NF的定义为：符合1NF的关系中的每个属性都不可再分</strong>。<code>表1</code>所示的情况，就不符合1NF的要求。</p>
            
        </article>
    </div>
    
    <div class="nexmoe-post">
        <a href="/2021/04/27/register%20in%20computer/">
            
                <div class="nexmoe-post-cover mdui-ripple" style="padding-bottom: 50%;"> 
                    <img data-src="https://i.loli.net/2021/04/27/lVnTj5pPwD4GAyE.jpg" data-sizes="auto" alt="计算机中的寄存器" class="lazyload">
                    <h1>计算机中的寄存器</h1>
                </div>
            
        </a>

        <div class="nexmoe-post-meta nexmoe-rainbow-fill">
            <a><i class="nexmoefont icon-calendar-fill"></i>2021年04月27日</a>
            <a><i class="nexmoefont icon-areachart"></i>1.1k 字</a>
            <a><i class="nexmoefont icon-time-circle-fill"></i>大概 4 分钟</a>
        </div>

        <article>
            
                <h1 id="数据寄存器"><a href="#数据寄存器" class="headerlink" title="数据寄存器"></a><strong>数据寄存器</strong></h1><p>包括4个16位的寄存器(AX, BX, CX, DX)或者8个8位寄存器(  AH, AL, BH, BL, CH, CL, DH, DL)</p>
<p>这些寄存器都可以用来暂时存放操作数, 运算结果以及其他信息, 但同时又具有某些专用用途</p>
            
        </article>
    </div>
    
</section>

        <!--<div class="nexmoe-post-right">
          <div class="nexmoe-fixed">
            <div class="nexmoe-tool">
              <a href="#nexmoe-content" class="toc-link" aria-label="回到顶部" title="top"><button class="mdui-fab mdui-ripple"><i class="nexmoefont icon-caret-top"></i></button></a>
            </div>
          </div>
        </div>-->
    </div>
  </div>
  <script src="https://cdn.jsdelivr.net/combine/npm/lazysizes@5.1.0/lazysizes.min.js,gh/highlightjs/cdn-release@9.15.8/build/highlight.min.js,npm/mdui@0.4.3/dist/js/mdui.min.js?v=1"></script>
<script>
	hljs.initHighlightingOnLoad();
</script>

<script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js"></script>


<script src="https://cdn.jsdelivr.net/gh/xtaodada/xtaodada.github.io@0.0.2/copy.js"></script>
 

<script src="/js/app.js?v=1620218706410"></script>

<script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/js/jquery.justifiedGallery.min.js"></script>
<script>
	$(".justified-gallery").justifiedGallery({
		rowHeight: 160,
		margins: 10,
	});
</script>

  





</body>

</html>
